<!DOCTYPE html>
<html>
	<head>
		<title> Infprog oblig 3 del2 </title>
		<meta charset ="utf-8">
		
		<script>
			window.onload = oppstart;
			function oppstart(){
				document.getElementById("getcheckvalue").onkeyup = checkanswer;
			}
			
			wordarray = ["Rock", "Metal", "Unicorn", "Python", 
						 "Jawbreaker", "Microwave", "Jigsaw", "Dungeon",
						 "Pandemonium", "Gauntlet", "Shadowgate", "Morrowind",
						 "Banished", "Crossfire", "Hellgate", "Redemption",
						 "Ghostbuster", "Bittersweet", "Ganondorf", "Dragonborn"
						]
			
			var corevalue = wordarray[Math.floor(Math.random()*19)]
			var testarray = corevalue.split("")
			var insertanswer = testarray
			var usedletterarray = []
			var showfeedbackarray = []
			life = 10
		
		// ------------ RESET GAME AND START OVER
			function resetgame (){
				var corevalue = wordarray[Math.floor(Math.random()*19)]
				var testarray = corevalue.split("")
				var usedletterarray = []
				var showfeedbackarray = []
				if (testarray.length > 7){
					life = 15
				}
					else {life = 10}
				 
			}
			
			
			function checkanswer (){
				var checkvalue = document.getElementById("getcheckvalue").value
				var input = document.getElementById("getcheckvalue") 
				var returnfeedback = document.getElementById("showfeedback")
				var showusedletter = document.getElementById("usedletters")
				var alreadyused = document.getElementById("alreadyused")
			// ------------- ANSWER CHECK AND LIFE REDUCTION
				if (life > 0){
				if (usedletterarray.indexOf(checkvalue) === -1){
					usedletterarray.push(checkvalue)
					alreadyused.innerHTML = ""
					
					for (i = 0; i <= corevalue.length; i++){
						var a = testarray[i]
							if (String(checkvalue).toUpperCase() === String(a).toUpperCase()){
								showfeedbackarray[i] = testarray[i]
														
							}
					}
				}
						
					
					else {alreadyused.innerHTML = "You already tried that, use another letter."}
				}
				
				else {alreadyused.innerHTML = "Game over, reset to try again"}
				
				returnfeedback.innerHTML = corevalue+"<br />"+showfeedbackarray;
				showusedletter.innerHTML = "You have used:" + String(usedletterarray).toUpperCase();
				input.value = ""
			}
		</script>
	</head>
	
	<body>
		<h2> Tobias Hansen Informatikk 2015, infprog oblig3 del2 </h2>
		<h3> Oppgave 3, Hangman </h3>
		<p id="usedletters"> </p>
		<p id="alreadyused"> </p>
		<p id="showfeedback"> </p>
		<input type="text" id="getcheckvalue" value="" />
		
	</body>
</html>